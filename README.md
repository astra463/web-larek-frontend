# Документация к проекту «Web-larek»

Реализация интернет-магазина «Web-larek. 
- Используемый стек: TypeScript, HTML, SCSS
- Для сборки используется Webpack. 
- Инструменты линтинга и форматирования не подключены.

Архитектура проекта состоит из трёх частей: **Модель** (Model), **представление** (View) и **презентер** (Presenter). 

**Модель**  отвечает за данные, которые используются в приложении. Модель данных обеспечивает единое представление данных в приложении и управляет их состоянием.

**Представление** отвечает за отображение данных пользователю, а также обеспечивает визуальное взаимодействие пользователя с приложением и отображает информацию, полученную из модели данных.

**Презентер** управляет взаимодействием между моделью данных и представлением. Он принимает пользовательский ввод из представления, обрабатывает его и обновляет модель данных, что в свою очередь приводит к изменениям в представлении. 

При инициализации приложения происходит загрузка товаров с сервера с помощью API. Данные помещаются в модель приложения, в свойство `catalog` класса `AppState` и генерируется событие `catalog:changed`. Далее происходит их рендеринг.

Класс `AppState` управляет состоянием всего приложения. Когда цель добавляет товар в корзину, он отправляется в свойство `basket` класса `AppState`. Когда пользователь оформляет заказ, данные заказа также отправляются в соответствующие свойства класса.

## Инструкция по сборке и запуску

После клонирования проекта установить зависимости: 

```
npm install
```

Для запуска проекта в режиме разработки выполнить команду: 
```
npm run start 
```

и открыть в браузере страницу по адресу [http://localhost:8080 ](http://localhost:8080)

Для сборки проекта в продакшен выполнить команду:
```
npm run build
``` 

Для данного проекта нет ограничений по использованию пакетного менеджера, поэтому можно использовать также YARN или PNPM.

## Архитектура
![UML-диаграмма](uml.png "UML-Диаграмма")

## Базовый код

# Документация к проекту «Web-larek»

Реализация интернет-магазина «Web-larek. 
- Используемый стек: TypeScript, HTML, SCSS
- Для сборки используется Webpack. 
- Инструменты линтинга и форматирования не подключены.

Архитектура проекта состоит из трёх частей: **Модель** (Model), **представление** (View) и **презентер** (Presenter). 

**Модель**  отвечает за данные, которые используются в приложении. Модель данных обеспечивает единое представление данных в приложении и управляет их состоянием.

**Представление** отвечает за отображение данных пользователю, а также обеспечивает визуальное взаимодействие пользователя с приложением и отображает информацию, полученную из модели данных.

**Презентер** управляет взаимодействием между моделью данных и представлением. Он принимает пользовательский ввод из представления, обрабатывает его и обновляет модель данных, что в свою очередь приводит к изменениям в представлении. 

При инициализации приложения происходит загрузка товаров с сервера с помощью API. Данные помещаются в модель приложения, в свойство `catalog` класса `AppState` и генерируется событие `catalog:changed`. Далее происходит их рендеринг.

Класс `AppState` управляет состоянием всего приложения. Когда цель добавляет товар в корзину, он отправляется в свойство `basket` класса `AppState`. Когда пользователь оформляет заказ, данные заказа также отправляются в соответствующие свойства класса.

*P.S. Для ревьюера*
*Честно говоря, я не совсем понимаю, **как писать интерфейсы, не зная, как будет реализован функционал**. То есть сейчас после того, как я написал интерфейс, я начинаю реализовывать, к примеру, добавление товаров на страницу, а затем смотрю, что из методов или свойств забыл указать в интерфейсе. Корректирую и пишу дальше.*

*В некоторых местах функционал гораздо более сложный, и я не могу просто заняться проектированием, не реализовав логику.*

*Также я не знаю, верно ли у меня реализован рендеринг карточек товара и других модальных окон, поэтому я решил отправить работу на первый этап ревью сейчас в надежде получить корректировки к работе.* 

## Инструкция по сборке и запуску

После клонирования проекта установить зависимости: 

```
npm install
```

Для запуска проекта в режиме разработки выполнить команду: 
```
npm run start 
```

и открыть в браузере страницу по адресу [http://localhost:8080 ](http://localhost:8080)

Для сборки проекта в продакшен выполнить команду:
```
npm run build
``` 

Для данного проекта нет ограничений по использованию пакетного менеджера, поэтому можно использовать также YARN или PNPM.

## Архитектура
здесь будет uml 

## Базовый код

### Класс `Model<T>`

Абстрактный класс `Model` предоставляет базовый функционал для моделей. Он используется для создания моделей данных в приложении. Он имеет следующие свойства и методы:

**Свойства**:

1. `data: Partial<T>` - частичные данные модели, которые могут быть переданы через конструктор при создании экземпляра класса.
2. `events: IEvents` - интерфейс для работы с событиями, предоставляющий методы для эмитирования событий.

**Методы**:

1. `constructor(data: Partial<T>, events: IEvents)` - конструктор класса, принимающий частичные данные модели и объект для работы с событиями. При создании экземпляра класса данные передаются через аргумент data, а объект событий - через аргумент events.
2. `emitChanges(event: string, payload?: object)` - метод, предназначенный для сообщения всем заинтересованным сторонам о том, что модель была изменена. Принимает строку event, представляющую собой название события, и опциональный payload, содержащий данные, связанные с событием. По умолчанию, если payload не передан, используется пустой объект {}.

### Класс `Component <T>`

Класс `Component<T>` является абстрактным базовым классом, предназначенным для работы с DOM элементами в приложениях. Он содержит следующие методы:

**Методы:**

1. **`toggleClass(element: HTMLElement, className: string, force?: boolean): void`**

Переключает класс у указанного элемента. Принимает аргументы:

- `element: HTMLElement` - DOM элемент, класс которого нужно изменить.
- `className: string` - название класса, который нужно переключить.
- `force?: boolean` - опциональный параметр, определяющий, следует ли добавить класс `true` или удалить его `false`. По умолчанию класс будет переключен.

2. **`setText(element: HTMLElement, value: unknown): void`**

Устанавливает текстовое содержимое для указанного элемента. Принимает аргументы:
    
- `element: HTMLElement` - DOM элемент, для которого устанавливается текстовое содержимое.
- `value: unknown` - значение, которое будет установлено в качестве текста элемента.

3. **`setDisabled(element: HTMLElement, state: boolean): void`**
    
Устанавливает состояние блокировки для указанного элемента. Принимает аргументы:

- `element: HTMLElement` - DOM элемент, для которого нужно установить состояние блокировки.
- `state: boolean` - состояние блокировки (true - заблокирован, false - разблокирован).

4. **`setHidden(element: HTMLElement): void`**

Скрывает указанный элемент, устанавливая для него стиль "display: none". Принимает аргументы:

- `element: HTMLElement` - DOM элемент, который нужно скрыть.

5. **`setVisible(element: HTMLElement): void`**
    
Отображает указанный элемент, удаляя стиль "display: none". Принимает аргументы:

- `element: HTMLElement` - DOM элемент, который нужно отобразить.

6. **`setImage(element: HTMLImageElement, src: string, alt?: string): void`**
    
Устанавливает изображение и альтернативный текст для указанного элемента. Принимает аргументы:

- `element: HTMLImageElement` - DOM элемент типа изображения (<img>), для которого нужно установить изображение и альтернативный текст.
- `src: string` - путь к изображению.
- `alt?: string` - опциональный параметр, альтернативный текст для изображения.

7. **`render(data?: Partial<T>): HTMLElement`**
    
Возвращает корневой DOM-элемент компонента. Принимает аргументы:
- `data?: Partial<T>` - частичные данные компонента, которые могут быть переданы при рендеринге.

### Класс EventEmitter

Класс EventEmitter представляет собой инструмент для работы с событиями в приложении. Он обеспечивает следующий функционал:

**Свойства**:

`events: Map<EventName, Set<Subscriber>>` - хранит информацию о зарегистрированных событиях и соответствующих им подписчиках.

**Методы:**

1. `constructor(): void` 

Конструктор класса, инициализирующий пустой список событий.

2. `on<T extends object>(eventName: EventName, callback: (event: T) => void): void` 

Регистрирует обработчик для указанного события. Принимает аргументы `eventName: EventName` - название события, `callback: (event: T) => void` - функция-обработчик, вызываемая при возникновении события. 

3. `off(eventName: EventName, callback: Subscriber): void` 

Снимает регистрацию обработчика с указанного события. Принимает аргументы: `eventName: EventName` - название события. `callback: Subscriber` - обработчик, который нужно удалить.

4. `emit<T extends object>(eventName: string, data?: T): void` 

Генерирует указанное событие и вызывает соответствующие обработчики. Принимает аргументы: `eventName: string` - название события. `data?: T` - данные, передаваемые в обработчики события.

5. `onAll(callback: (event: EmitterEvent) => void): void` 

Регистрирует обработчик для всех событий.

6. `offAll(): void` 

Удаляет все зарегистрированные события и их обработчики.

7. `trigger<T extends object>(eventName: string, context?: Partial<T>): Function` 

Возвращает функцию, которая генерирует указанное событие при вызове. Принимает аргументы: `eventName: string` - название события. `context?: Partial<T>` - дополнительные данные, передаваемые в обработчики события.

### Класс `Api`

Класс `Api` предоставляет удобный интерфейс для выполнения HTTP-запросов к внешнему API. Он содержит следующие методы и свойства:

**Свойства:**

1. `baseUrl: string` - базовый URL для всех запросов к API.
2. `options: RequestInit` - опции запроса, такие как заголовки и другие параметры.

**Методы:**

1. `constructor(baseUrl: string, options: RequestInit = {}): void`

Конструктор класса, инициализирующий базовый URL и опции запроса.Принимает аргументы:

- `baseUrl: string` - базовый URL для всех запросов.
- `options: RequestInit` - дополнительные опции запроса.

2. `protected handleResponse(response: Response): Promise<object>`
    
Обработчик ответа от сервера. Возвращает объект `Promise`, который разрешается с данными ответа или отклоняется с сообщением об ошибке. Принимает аргументы:

- `response: Response` - объект ответа от сервера.

3. `get(uri: string): Promise<object>`
    
Выполняет GET-запрос к указанному URI. Принимает аргументы:

- `uri: string` - дополнительный путь к ресурсу, к которому нужно выполнить запрос.

Возвращает объект Promise, который разрешается с данными ответа или отклоняется с сообщением об ошибке.

4. `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>`
    
Выполняет POST-запрос к указанному URI. Принимает аргументы:

- `uri: string` - дополнительный путь к ресурсу, к которому нужно выполнить запрос.
- `data: object` - данные, которые нужно отправить на сервер.
- `method: ApiPostMethods` - метод запроса ('POST' по умолчанию).

Возвращает объект Promise, который разрешается с данными ответа или отклоняется с сообщением об ошибке.

## Компоненты модели данных (бизнес-логика)
### Класс `AppState`

Класс `AppState` расширяет абстрактный класс `Model<IAppState>`, предоставляя функционал для управления состоянием приложения.

 **Свойства**:

1. `catalog: Product[]` - массив товаров в каталоге магазина.
2. `basket: IBasketState` - состояние корзины покупок, содержащее список товаров и общую стоимость.
3. `orderData: IOrder` - данные о заказе, включающие информацию о заказе и данные покупателя.
4. `formErrors: FormErrors` - объект, содержащий ошибки валидации формы.

 **Методы**:

1. `setCatalog(items: IProduct[])` - метод для установки каталога товаров. Принимает массив товаров `items` типа `IProduct[]`. Преобразует массив товаров в экземпляры класса `Product` и сохраняет их в каталоге. Генерирует событие об изменении каталога.
    
2. `addToBasket(product: IProduct)` - метод для добавления товара в корзину. Принимает объект товара `product` типа `IProduct`. Добавляет товар в корзину, увеличивает общую стоимость товаров в корзине и генерирует событие об изменении корзины.
    
3. `removeFromBasket(product: IProduct)` - метод для удаления товара из корзины. Принимает объект товара `product` типа `IProduct`. Удаляет товар из корзины и обновляет общую стоимость товаров в корзине. Генерирует событие об изменении корзины.
    
4. `clearBasket()` - метод для очистки корзины. Очищает список товаров в корзине, устанавливает общую стоимость корзины в 0 и генерирует событие об изменении корзины.
    
5. `setOrderField(field: keyof ICustomerData, value: string)` - метод для установки значения поля в заказе. Принимает название поля `field` и значение `value`. Обновляет соответствующее поле в заказе и проверяет валидность заказа.
    
6. `clearOrderData()` - метод для сброса данных заказа. Сбрасывает данные о заказе и очищает корзину.
    
7. `validateOrder()` - метод для валидации данных заказа. Проверяет наличие и валидность email и номера телефона покупателя. Обновляет объект `formErrors` с ошибками валидации и генерирует событие об изменении ошибок формы.
    
8. `validateAddress(event: object, form: CustomerDataForm | OrderDetailsForm)` - метод для валидации адреса доставки. Проверяет валидность введенного адреса по регулярному выражению и обновляет объект формы с информацией об ошибке.

### Класс `ProductModel`

Класс `ProductModel` является конкретной реализацией абстрактного класса `Model<IProduct>` и предназначен для управления данными о продуктах. Он наследует базовую функциональность от класса `Model<IProduct>` и может содержать дополнительные методы для работы с данными о продуктах.

**Конструктор:**

1. `constructor(data: Partial<IProduct>, events: IEvents): void`

Конструктор класса, принимающий частичные данные о продукте и объект для работы с событиями. При создании экземпляра класса данные передаются через аргумент `data`, а объект событий - через аргумент `events`. Внутри конструктора вызывается конструктор базового класса `Model<IProduct>`, который инициализирует объект с данными и объект для работы с событиями.

### Класс `Product`

Класс Product является конкретной реализацией абстрактного класса `Model<IProduct>` и представляет собой модель продукта в приложении. Он содержит следующие свойства и методы:

**Свойства:**

1. `category: string` - категория продукта.
2. `title: string` - название продукта.
3. `image: string` - URL изображения продукта.
4. `price: number` - цена продукта.
5. `about: string` - описание продукта.

**Методы:**

1. `constructor(data: Partial<IProduct>, events: IEvents): void`

Конструктор класса, принимающий частичные данные о продукте и объект для работы с событиями. При создании экземпляра класса данные передаются через аргумент `data`, а объект событий - через аргумент events. Внутри конструктора вызывается конструктор базового класса `Model<IProduct>`, который инициализирует объект с данными и объект для работы с событиями. Кроме того, значения свойств продукта присваиваются из переданных данных.

### Класс `StoreAPI`

Класс `StoreAPI` представляет собой инструмент для взаимодействия с внешним API магазина и является конкретной реализацией класса Api. Он содержит следующие методы и свойства:

**Свойства:**

1. `cdn: string` - URL контентного хранилища (Content Delivery Network), используемого для хранения изображений продуктов.

**Методы:**

1. `constructor(cdn: string, baseUrl: string, options?: RequestInit): void`

Конструктор класса, принимающий URL контентного хранилища, базовый URL для API магазина и дополнительные опции для настройки запросов. При создании экземпляра класса вызывается конструктор родительского класса Api для инициализации базового URL и опций запроса.

2. `getProductList(): Promise<IProduct[]>`

Метод для получения списка продуктов магазина. Возвращает объект `Promise`, который разрешается массивом объектов продуктов типа `IProduct`. Данные продуктов получаются из ответа API, и каждый объект продукта дополнительно обрабатывается для добавления полного URL изображения из контентного хранилища.

3. `getProductItem(id: string): Promise<IProduct>`
    
Метод для получения информации о конкретном продукте по его идентификатору. Принимает аргумент `id: string` - идентификатор продукта.

Возвращает объект `Promise`, который разрешается объектом продукта типа `IProduct`. Информация о продукте получается из ответа API, и объект продукта дополнительно обрабатывается для добавления полного URL изображения из контентного хранилища.

4. **`placeOrder(requestBody: PlaceOrderRequest): Promise<PlaceOrderResponse>`**:

Отправляет запрос на сервер для размещения заказа.
Аргументы: `requestBody` - Данные для размещения заказа, в формате `PlaceOrderRequest` 
Возвращает: Промис, который разрешается объектом типа `PlaceOrderResponse`.

## Компоненты представления

Элементы интерфейса построены на базе класса `Page`, который в свою очередь наследуется от абстрактного класса `Component<T>`

### Класс `Page`

Класс `Page` расширяет функциональность базового компонента `Component<IPage>`, обеспечивая управление основными элементами страницы.

 **Конструктор**:

- **`constructor(container: HTMLElement, events: IEvents)`**: Создает новый экземпляр класса `Page`.
    - `container`: HTML-элемент, представляющий контейнер страницы.
    - `events`: Экземпляр объекта событий для взаимодействия с другими компонентами.

 **Свойства**:

- **`_gallery: HTMLElement`**: HTML-элемент, представляющий галерею товаров на странице.
- **`_basket: HTMLElement`**: HTML-элемент, представляющий корзину на странице.
- **`_wrapper: HTMLElement`**: HTML-элемент, представляющий обертку страницы.
- **`_counter: HTMLElement`**: HTML-элемент, представляющий счетчик товаров в корзине.

 **Методы**:

1. **`constructor(container: HTMLElement, events: IEvents)`**:
    
    - Переопределение конструктора базового класса `Component<IPage>`.
    - Инициализирует свойства `_gallery`, `_basket`, `_wrapper` и `_counter`.
    - Устанавливает обработчик события клика на корзину для открытия корзины.
2. **`set gallery(items: HTMLElement[]): void`**:
    
    - Устанавливает содержимое галереи товаров на странице.
3. **`set counter(value: number): void`**:
    
    - Устанавливает значение счетчика товаров в корзине.
4. **`set locked(value: boolean): void`**:
    
    - Устанавливает блокировку страницы.
    - Если значение `true`, добавляет класс `page__wrapper_locked` к обертке страницы, в противном случае - удаляет этот класс.

Этот класс предоставляет удобный интерфейс для управления основными элементами страницы, такими как галерея товаров, корзина и счетчик товаров в корзине, а также предоставляет возможность блокировки страницы.

### Класс `CatalogItem`

Класс `CatalogItem` является конкретной реализацией класса `Card<ProductCategory>` и представляет собой элемент каталога продуктов. Он содержит следующие свойства и методы:

**Свойства**:

1. `category: HTMLSpanElement` - DOM элемент, представляющий категорию продукта.

**Методы**:

1. `constructor(container: HTMLElement, actions?: ICardActions): void`
    
Конструктор класса, принимающий контейнер, в котором будет создаваться элемент каталога `container`, и дополнительные действия, которые можно применить к элементу карточки `actions`. Внутри конструктора вызывается конструктор родительского класса `Card<ProductCategory>`, который инициализирует базовый контейнер элемента карточки. Кроме того, инициализируется DOM элемент категории продукта `category`.

2. `set category(value: string): void`
    
Метод для установки категории продукта и соответствующего ей стиля категории. Принимает строковое значение категории продукта `value` и устанавливает его текстовое содержимое для элемента `_category`. Также, в зависимости от значения категории, метод применяет соответствующий CSS класс категории, изменяя её стиль.

### Класс `Card<T>`

Класс `Card<T>` представляет собой компонент карточки элемента, который может содержать информацию о различных объектах, таких как продукты, новости и т. д. Он является обобщенной реализацией компонента и может быть использован для отображения различных типов данных. Класс содержит следующие свойства и методы:

**Свойства**:

1. `_title: HTMLElement` - DOM элемент, представляющий заголовок карточки.
2. `_image?: HTMLImageElement` - необязательный DOM элемент, представляющий изображение карточки.
3. `_button?: HTMLButtonElement` - необязательный DOM элемент, представляющий кнопку карточки (если такая имеется).
4. `_about?: HTMLElement` - необязательный DOM элемент, представляющий описание карточки (если такое имеется).
5. `_price: HTMLSpanElement` - DOM элемент, представляющий цену карточки.

**Методы**:

1. `constructor(blockName: string, container: HTMLElement, actions?: ICardActions): void`
    
Конструктор класса, принимающий имя блока `blockName`, контейнер, в котором будет создаваться элемент карточки `container`, и дополнительные действия, которые можно применить к элементу карточки `actions`. Внутри конструктора вызывается конструктор родительского класса `Component<ICard<T>>`, который инициализирует базовый контейнер компонента. Кроме того, в конструкторе инициализируются DOM элементы карточки (заголовок, изображение, кнопка, описание, цена) на основе переданного имени блока.

2. `set id(value: string): void`
    
Метод для установки идентификатора карточки. Принимает строковое значение идентификатора `value` и устанавливает его в атрибут `dataset` контейнера карточки.

3. `get id(): string`
        
Метод для получения идентификатора карточки. Возвращает строковое значение идентификатора из атрибута `dataset` контейнера карточки.

4. `set title(value: string): void`
    
Метод для установки заголовка карточки. Принимает строковое значение заголовка `value` и устанавливает его текстовое содержимое для элемента заголовка `_title`.
    
5. `get title(): string`
    
Метод для получения заголовка карточки. Возвращает текстовое содержимое элемента заголовка `_title`.

6. `set image(value: string): void`
    
Метод для установки изображения карточки. Принимает строковое значение URL изображения `value` и устанавливает его для элемента изображения `_image`, а также использует значение заголовка для атрибута `alt`.

7. `set price(value: string): void`
    
Метод для установки цены карточки. Принимает строковое значение цены `value` и устанавливает его текстовое содержимое для элемента цены `_price`.

8. `set about(value: string | string[]): void`
    
Метод для установки описания карточки. Принимает строку или массив строк `value` и устанавливает его текстовое содержимое для элемента описания `_about`. Если передан массив строк, метод заменяет текущее содержимое элемента описания на элементы с текстом из массива.

### Класс `Modal`

Класс `Modal` представляет модальное окно, которое может быть открыто и закрыто. Он расширяет базовый класс `Component<IModalData>`, который обеспечивает основную функциональность компонентов в приложении. В дополнение к этому классу имеет следующие свойства и методы:

**Свойства**:

1. `_closeButton: HTMLButtonElement` - кнопка закрытия модального окна.
2. `_content: HTMLElement` - содержимое модального окна.

**Конструктор**:

`constructor(container: HTMLElement, events: IEvents)`

Конструктор принимает в качестве параметров элемент контейнера `container`, куда будет добавлено модальное окно, и объект `events` типа `IEvents`, который предоставляет доступ к системе событий.

**Методы**:

1. `open(): void` - открывает модальное окно. Добавляет класс `modal_active` к контейнеру модального окна и генерирует событие `MODAL_OPENED`.
    
2. `close(): void` - закрывает модальное окно. Удаляет класс `modal_active` из контейнера модального окна, очищает его содержимое и генерирует событие `MODAL_CLOSED`.
    
3. `render(data: IModalData): HTMLElement` - отрисовывает модальное окно на основе данных `data`. Открывает модальное окно после отрисовки и возвращает его контейнер.
    

**Сеттеры**:

1. `content(value: HTMLElement): void` - устанавливает содержимое модального окна. Принимает значение `value` типа `HTMLElement` и заменяет текущее содержимое модального окна на это значение.

### Класс `Basket`

Класс `Basket` расширяет абстрактный класс `Component<IBasketView>`, предоставляя функционал для управления отображением корзины покупок в интерфейсе пользователя.

 **Свойства**:

1. `_list: HTMLElement` - элемент списка товаров в корзине.
2. `_total: HTMLElement` - элемент, отображающий общую стоимость товаров в корзине.
3. `_button: HTMLElement` - кнопка для перехода к оформлению заказа.
4. `_itemIndex: HTMLElement` - элемент, отображающий индекс товара в корзине.

 **Методы**:

1. `constructor(container: HTMLElement, events: EventEmitter)` - конструктор класса. Принимает контейнер, в котором будет размещена корзина, и объект событий для взаимодействия с другими компонентами. Инициализирует свойства `_list`, `_total`, `_button`, `_itemIndex`, устанавливает обработчик события на кнопку оформления заказа.
    
2. `set items(items: HTMLElement[])` - метод для установки списка товаров в корзине. Принимает массив элементов `items`, каждый из которых представляет отдельный товар. Устанавливает уникальные индексы для товаров и обновляет список товаров в корзине.
    
3. `set total(total: number)` - метод для установки общей стоимости товаров в корзине. Принимает числовое значение `total`, представляющее общую стоимость товаров в корзине. Обновляет отображение общей стоимости в интерфейсе.
    
4. `updateBasket()` - метод для обновления индексов элементов в корзине. Пересчитывает индексы товаров и обновляет их отображение.
    
5. `setEmpty()` - метод для установки сообщения о пустой корзине. Заменяет содержимое корзины на сообщение о том, что она пуста, и блокирует кнопку оформления заказа.

### Класс `SuccessModal`

Класс `SuccessModal` расширяет абстрактный класс `Component<ISuccessData>`, предоставляя функционал для отображения модального окна успешного завершения заказа.

 **Свойства**:

1. `_total: HTMLElement` - элемент, представляющий общую стоимость заказа в модальном окне.
2. `_button: HTMLElement` - кнопка закрытия модального окна.

**Методы**:

1. `constructor(container: HTMLElement, events: EventEmitter)` - конструктор класса. Принимает контейнер, в который будет вставлено модальное окно, и объект событий `events`. Устанавливает обработчик события на кнопку модального окна.
    
2. `set total(total: number)` - метод для установки общей стоимости заказа. Принимает общую стоимость заказа `total` типа `number`. Устанавливает текстовое содержимое элемента `_total` с отформатированной стоимостью заказа.

### Класс `Form<T>`

Класс `Form<T>` представляет форму с обобщенным типом данных, позволяющий работать с различными типами данных.

 **Конструктор**:

- **`constructor(container: HTMLFormElement, events: IEvents)`**: Создает новый экземпляр класса `Form`.
    - `container`: HTML-элемент формы.
    - `events`: Экземпляр объекта событий для взаимодействия с другими компонентами.

 **Свойства**:

- **`_errors: HTMLElement`**: HTML-элемент для отображения ошибок валидации формы.
- **`_submit: HTMLButtonElement`**: HTML-кнопка для отправки формы.

 **Методы**:

1. **`onInputChange(field: keyof T, value: string): void`**:
    
    - Обработчик события изменения ввода. Эмитирует событие с информацией о измененном поле.
        - `field`: Название измененного поля.
        - `value`: Новое значение поля.
2. **`set errors(value: string): void`**:
    
    - Устанавливает сообщение об ошибке валидации формы.
        - `value`: Строка с сообщением об ошибке.
3. **`set valid(value: boolean): void`**:
    
    - Устанавливает состояние валидности формы.
        - `value`: `true`, если форма валидна, иначе `false`.
4. **`render(state: Partial<T> & IFormState): HTMLFormElement`**:
    
    - Рендерит состояние формы.
        - `state`: Частичное состояние формы и состояние валидации.
    - Возвращает: HTML-элемент формы.

Этот класс обеспечивает управление состоянием и взаимодействие с формой, позволяя обрабатывать ввод пользователя, устанавливать ошибки валидации и управлять валидностью формы.

### Класс `OrderDetailsForm`

Класс `OrderDetailsForm` расширяет функциональность базового класса `Form<T>`, предоставляя возможность ввода и обработки информации о заказе.

 **Конструктор**:

- **`constructor(container: HTMLFormElement, events: IEvents)`**: Создает новый экземпляр класса `OrderDetailsForm`.
    - `container`: HTML-элемент формы.
    - `events`: Экземпляр объекта событий для взаимодействия с другими компонентами.

 **Свойства**:

- **`_onlineButton?: HTMLButtonElement`**: HTML-кнопка для выбора онлайн-оплаты.
- **`_uponReceiptButton?: HTMLButtonElement`**: HTML-кнопка для выбора оплаты при получении.
- **`_paymentMethod: PaymentMethod`**: Выбранный способ оплаты. По умолчанию установлен в `'online'`.
- **`_deliveryAddress: HTMLInputElement`**: HTML-элемент для ввода адреса доставки.

**Методы**:

1. **`onPaymentMethodChange(): void`**:
    
    - Метод для обработки изменения способа оплаты. Эмитирует событие с информацией о выбранном способе оплаты.
2. **`setActive(button: HTMLButtonElement): void`**:
    
    - Метод для установки активной кнопки способа оплаты.
        - `button`: HTML-кнопка, которую нужно сделать активной.
3. **`constructor(container: HTMLFormElement, events: IEvents)`**:
    
    - Переопределение конструктора базового класса `Form<T>`.
    - Инициализирует свойства `_onlineButton`, `_uponReceiptButton` и `_deliveryAddress`.
    - Устанавливает обработчики событий для кнопок выбора способа оплаты и отправки формы.
4. **`render(state: Partial<T> & IFormState): HTMLFormElement`**:
    
    - Переопределение метода рендеринга из базового класса `Form<T>`.
    - Рендерит состояние формы заказа.
        - `state`: Частичное состояние формы и состояние валидации.
    - Возвращает: HTML-элемент формы.
5. **`set errors(value: string): void`** и **`set valid(value: boolean): void`**:
    
    - Эти методы наследуются от базового класса `Form<T>` и используются для установки сообщений об ошибках и состояния валидности формы.
6. **`onInputChange(field: keyof T, value: string): void`**:
    
    - Этот метод наследуется от базового класса `Form<T>` и используется для обработки ввода пользователя.
7. **`container.addEventListener('submit', (e: Event) => { ... }): void`**:
    
    - Обработчик события отправки формы. Эмитирует событие с информацией о введенных данных о заказе.

Этот класс обеспечивает управление состоянием и взаимодействие с формой для ввода информации о заказе, включая выбор способа оплаты и ввод адреса доставки.

### Класс `CustomerDataForm`

Класс `CustomerDataForm` расширяет функциональность базового класса `Form<ICustomerData>`, предоставляя возможность ввода и обработки информации о контактных данных покупателя.

 **Конструктор**:

- **`constructor(container: HTMLFormElement, events: IEvents)`**: Создает новый экземпляр класса `CustomerDataForm`.
    - `container`: HTML-элемент формы.
    - `events`: Экземпляр объекта событий для взаимодействия с другими компонентами.

**Свойства**:

- **`_emailInput: HTMLInputElement`**: HTML-элемент для ввода электронной почты покупателя.
- **`_phoneNumberInput: HTMLInputElement`**: HTML-элемент для ввода номера телефона покупателя.

**Методы**:

1. **`constructor(container: HTMLFormElement, events: IEvents)`**:
    
    - Переопределение конструктора базового класса `Form<ICustomerData>`.
    - Инициализирует свойства `_emailInput` и `_phoneNumberInput`.
    - Устанавливает обработчик события отправки формы.
2. **`set valid(value: boolean): void`**:
    
    - Этот метод наследуется от базового класса `Form<ICustomerData>` и используется для установки состояния валидности формы.
3. **`container.addEventListener('submit', (e: Event) => { ... }): void`**:
    
    - Обработчик события отправки формы. Эмитирует событие с информацией о введенных контактных данных покупателя.

Этот класс обеспечивает управление состоянием и взаимодействие с формой для ввода информации о контактных данных покупателя, включая электронную почту и номер телефона.

## Типы данных и интерфейсы

#### Типы данных:

1. **`ProductCategory`**:
    
    - Перечисление возможных категорий товаров, ограниченное следующими значениями: 'софт-скилл', 'другое', 'дополнительное', 'кнопка', 'хард-скилл'.
2. **`PaymentMethod`**:
    
    - Перечисление возможных методов оплаты, ограниченное значениями: 'online' (онлайн), 'upon-receipt' (при получении).

#### Интерфейсы:

1. **`IFormData`**:
    
    - Объединение интерфейсов `ICustomerData` и `IOrderDetails`.
2. **`IProduct`**:
    
    - Интерфейс для описания товара.
    - Содержит поля: `id`, `category`, `title`, `image`, `price`, `about`.
3. **`ICustomerData`**:
    
    - Интерфейс для формы ввода данных покупателя.
    - Содержит поля: `phone`, `email`.
4. **`IOrderDetails`**:
    
    - Интерфейс для формы ввода данных заказа.
    - Содержит поля: `paymentMethod`, `deliveryAddress`.
5. **`IOrder`**:
    
    - Интерфейс для описания заказа.
    - Содержит поля: `orderDetails` (данные заказа), `customerData` (данные покупателя).
6. **`IBasketState`**:
    
    - Интерфейс для описания состояния корзины.
    - Содержит поля: `items` (товары в корзине), `total` (общая стоимость).
7. **`IBasketView`**:
    
    - Интерфейс для представления корзины в пользовательском интерфейсе.
    - Содержит поля: `items` (HTML-элементы товаров в корзине), `total` (общая стоимость).
8. **`IModalData`**:
    
    - Интерфейс для данных модального окна.
    - Содержит поле `content` (контент модального окна).
9. **`IAppState`**:
    
    - Интерфейс для описания состояния приложения.
    - Содержит поля: `catalog` (каталог товаров), `basket` (состояние корзины), `orderData` (данные заказа).
10. **`IForm<T>`**:
    
    - Интерфейс для формы с обобщенными данными.
    - Содержит поля: `data` (данные формы), `submit` (метод отправки формы).
11. **`ISuccessData`**:
    
    - Интерфейс для данных модального окна об успешном заказе.
    - Содержит поле `total` (общая стоимость заказа).
12. **`FormErrors`**:
    - Тип данных для представления ошибок формы.
    - Является частичным набором записей, где ключами являются поля формы, а значениями - строки с сообщениями об ошибках.
#### Типы запросов и ответов:

1. **`PlaceOrderRequest`**:
    
    - Тип данных для запроса на оформление заказа.
    - Содержит поля: `payment`, `email`, `phone`, `address`, `total`, `items`.
2. **`PlaceOrderResponse`**:
    
    - Тип данных для ответа от сервера после оформления заказа.
    - Содержит поля: `id`, `total`.

### Перечисление `Events`

Перечисление `Events` содержит список событий, которые могут возникать в приложении. Эти события используются для управления состоянием, взаимодействия между компонентами и обработки действий пользователя.

 **События**:

1. `CATALOG_CHANGED`: Событие, сигнализирующее об изменении каталога товаров.
2. `CARD_SELECTED`: Событие, сигнализирующее о выборе карточки товара.
3. `MODAL_CLOSED`: Событие, сигнализирующее о закрытии модального окна.
4. `MODAL_OPENED`: Событие, сигнализирующее об открытии модального окна.
5. `BASKET_APPENDED`: Событие, сигнализирующее о добавлении товара в корзину.
6. `BASKET_REDUCED`: Событие, сигнализирующее о удалении товара из корзины.
7. `BASKET_CLEARED`: Событие, сигнализирующее о полной очистке корзины.
8. `BASKET_CHANGED`: Событие, сигнализирующее об изменении содержимого корзины.
9. `BASKET_OPENED`: Событие, сигнализирующее об открытии корзины.
10. `ORDER_DETAILS_INFO_ENTERED`: Событие, сигнализирующее о вводе информации о заказе.
11. `ORDER_ADDRESS_CHANGED`: Событие, сигнализирующее об изменении адреса доставки заказа.
12. `ORDER_CONTACT_INFO_ENTERED`: Событие, сигнализирующее о вводе контактной информации для заказа.
13. `ORDER_EMAIL_CHANGED`: Событие, сигнализирующее об изменении адреса электронной почты для заказа.
14. `ORDER_PHONE_NUMBER_CHANGED`: Событие, сигнализирующее об изменении номера телефона для заказа.
15. `ORDER_PLACED`: Событие, сигнализирующее о размещении заказа.
16. `ORDER_COMPLETE`: Событие, сигнализирующее об успешном завершении заказа.

Эти события позволяют эффективно управлять поведением и состоянием приложения, реагировать на действия пользователя и обновлять интерфейс в соответствии с изменениями.